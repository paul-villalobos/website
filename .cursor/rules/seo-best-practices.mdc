---
description: Estrategia completa de SEO para el sitio, incluyendo metadatos, datos estructurados, breadcrumbs, y mejores pr√°cticas implementadas.
alwaysApply: false
---

# name: seo-best-practices

# description: Reglas y mejores pr√°cticas SEO implementadas en el sitio para garantizar optimizaci√≥n completa, indexaci√≥n adecuada y mejor rendimiento en motores de b√∫squeda.

# globs: ["src/pages/**/*.astro", "src/layouts/**/*.astro", "src/components/**/*.astro"]

# alwaysApply: true

## üéØ Objetivo

Garantizar que todas las p√°ginas del sitio implementen las mejores pr√°cticas SEO siguiendo los patrones establecidos, incluyendo metadatos din√°micos, datos estructurados JSON-LD, breadcrumbs, y optimizaciones t√©cnicas.

---

## ‚úÖ REQUISITOS OBLIGATORIOS PARA TODAS LAS P√ÅGINAS

### 1. Metadatos SEO Din√°micos

**SIEMPRE** pasar props a `MainLayout` en lugar de usar scripts inline:

```astro
// ‚úÖ CORRECTO
import { generateHomeMeta } from '../utils/blogUtils';
const homeMeta = generateHomeMeta();

<MainLayout
  title={homeMeta.title}
  description={homeMeta.description}
  keywords={homeMeta.keywords}
  canonical={homeMeta.canonical}
  ogImage={homeMeta.ogImage}
  ogType={homeMeta.ogType}
  structuredData={homeStructuredData}
>
```

```astro
// ‚ùå INCORRECTO - NUNCA usar scripts inline para metadatos
<MainLayout>
  <script is:inline>
    document.title = "..."; // ‚ùå MAL
  </script>
</MainLayout>
```

### 2. Funciones de Generaci√≥n de Metadatos

**SIEMPRE** crear funciones espec√≠ficas en `src/utils/blogUtils.ts` para generar metadatos:

```typescript
/**
 * Genera metadatos SEO para [nombre de la p√°gina]
 */
export function generate[Nombre]Meta() {
  const siteUrl = "https://paulvillalobos.com";
  const pageUrl = `${siteUrl}/[ruta]`;

  return {
    title: "[T√≠tulo espec√≠fico] | Paul Villalobos - [Descripci√≥n]",
    description: "[Descripci√≥n optimizada para SEO, 150-160 caracteres]",
    keywords: "[keywords relevantes, separadas por comas]",
    canonical: pageUrl,
    ogImage: `${siteUrl}/images/og-default.jpg`, // O imagen espec√≠fica
    ogType: "website", // O "article" para posts
  };
}
```

### 3. Datos Estructurados JSON-LD

**SIEMPRE** incluir datos estructurados JSON-LD apropiados:

```typescript
/**
 * Genera datos estructurados JSON-LD para [nombre de la p√°gina]
 */
export function generate[Nombre]StructuredData() {
  const siteUrl = "https://paulvillalobos.com";
  const pageUrl = `${siteUrl}/[ruta]`;

  return {
    "@context": "https://schema.org",
    "@type": "[TipoSchema]", // Person, Blog, ContactPage, etc.
    // ... propiedades espec√≠ficas del tipo
  };
}
```

**Para p√°ginas con breadcrumbs**, usar `@graph`:

```typescript
{
  "@context": "https://schema.org",
  "@graph": [
    // Datos estructurados principales
    mainStructuredData,
    // Datos estructurados de breadcrumbs
    breadcrumbStructuredData
  ]
}
```

### 4. Breadcrumbs

**SIEMPRE** incluir breadcrumbs en p√°ginas que no sean la home:

```typescript
// Generar breadcrumbs
const breadcrumbs = [
  { name: "Inicio", url: "https://paulvillalobos.com" },
  { name: "[P√°gina]", url: "https://paulvillalobos.com/[ruta]" },
];

// Generar datos estructurados de breadcrumbs
const breadcrumbStructuredData = generateBreadcrumbStructuredData(breadcrumbs);
```

**Template de breadcrumbs visuales:**

```astro
<nav class="mb-6 flex justify-center" aria-label="Breadcrumb">
  <ol class="flex items-center space-x-2 text-sm text-slate-600">
    {breadcrumbs.map((item, index) => (
      <li class="flex items-center">
        {index > 0 && (
          <svg class="w-4 h-4 mx-2" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
          </svg>
        )}
        {index === breadcrumbs.length - 1 ? (
          <span class="text-slate-900 font-medium">{item.name}</span>
        ) : (
          <a href={item.url} class="hover:text-blue-600 transition-colors duration-200">
            {item.name}
          </a>
        )}
      </li>
    ))}
  </ol>
</nav>
```

---

## üñºÔ∏è OPTIMIZACI√ìN DE IM√ÅGENES

### Dimensiones Expl√≠citas

**SIEMPRE** incluir `width` y `height` en todas las im√°genes:

```astro
<!-- ‚úÖ CORRECTO -->
<img
  src={imageUrl}
  alt={imageAlt}
  width="640"
  height="360"
  loading="lazy"
/>

<!-- ‚ùå INCORRECTO -->
<img src={imageUrl} alt={imageAlt} />
```

**Proporciones est√°ndar:**

- Hero/Blog cards: `width="640" height="360"` (16:9)
- Open Graph: `width="1200" height="630"` (1.91:1)
- Profile/avatar: `width="400" height="400"` (1:1)

---

## üìù CANONICAL URLs

### Priorizar Canonical del Frontmatter

**SIEMPRE** priorizar canonical del frontmatter si existe:

```typescript
// ‚úÖ CORRECTO
const canonicalUrl = post.data.canonical || `${siteUrl}/posts/${post.slug}`;

// ‚ùå INCORRECTO - Ignorar canonical del frontmatter
const canonicalUrl = `${siteUrl}/posts/${post.slug}`;
```

### URLs Consistentes

**SIEMPRE** usar el mismo patr√≥n de URL en:

- Canonical meta tag
- Open Graph URL
- Twitter URL
- Datos estructurados JSON-LD

---

## üö´ LO QUE NUNCA DEBES HACER

### ‚ùå Scripts Inline para Metadatos

```astro
<!-- ‚ùå NUNCA -->
<script is:inline>
  document.title = "...";
  document.querySelector('meta[name="description"]').setAttribute('content', '...');
</script>
```

### ‚ùå Microdata (itemscope, itemprop, itemtype)

```astro
<!-- ‚ùå NUNCA usar microdata -->
<article itemscope itemtype="https://schema.org/BlogPosting">
  <h2 itemprop="headline">...</h2>
</article>

<!-- ‚úÖ SIEMPRE usar solo JSON-LD -->
<script type="application/ld+json" set:html={JSON.stringify(structuredData)}></script>
```

### ‚ùå Datos Estructurados Duplicados

No mezclar JSON-LD con microdata en el mismo elemento.

### ‚ùå Metadatos Hardcodeados

```astro
<!-- ‚ùå NUNCA -->
<MainLayout title="Mi P√°gina" description="Descripci√≥n hardcodeada">

<!-- ‚úÖ SIEMPRE -->
const pageMeta = generatePageMeta();
<MainLayout title={pageMeta.title} description={pageMeta.description}>
```

---

## üìã PATRONES POR TIPO DE P√ÅGINA

### P√°gina Principal (Home)

```astro
---
import { generateHomeMeta, generateHomeStructuredData } from '../utils/blogUtils';

const homeMeta = generateHomeMeta();
const homeStructuredData = generateHomeStructuredData();
---

<MainLayout
  title={homeMeta.title}
  description={homeMeta.description}
  keywords={homeMeta.keywords}
  canonical={homeMeta.canonical}
  ogImage={homeMeta.ogImage}
  ogType={homeMeta.ogType}
  structuredData={homeStructuredData}
>
```

### P√°ginas de Contenido (Blog, Contacto, etc.)

```astro
---
import { generateBlogMeta, generateBlogStructuredData, generateBlogBreadcrumbs, generateBreadcrumbStructuredData } from '../utils/blogUtils';

const pageMeta = generateBlogMeta(data);
const pageStructuredData = generateBlogStructuredData(data);
const breadcrumbs = generateBlogBreadcrumbs();
const breadcrumbStructuredData = generateBreadcrumbStructuredData(breadcrumbs);

const combinedStructuredData = {
  "@context": "https://schema.org",
  "@graph": [
    pageStructuredData,
    breadcrumbStructuredData
  ]
};
---

<MainLayout
  title={pageMeta.title}
  description={pageMeta.description}
  keywords={pageMeta.keywords}
  canonical={pageMeta.canonical}
  ogImage={pageMeta.ogImage}
  ogType={pageMeta.ogType}
  structuredData={combinedStructuredData}
>
  <!-- Breadcrumbs visuales -->
  <!-- Contenido -->
</MainLayout>
```

### Posts del Blog

Usar `BlogLayout` que ya maneja todo autom√°ticamente:

```astro
<BlogLayout
  post={processedPost}
  showTOC={true}
  includeBreadcrumbs={true}
>
  <Content />
</BlogLayout>
```

---

## üîß OPTIMIZACIONES T√âCNICAS

### 1. Datos Estructurados del Blog

**SIEMPRE** limitar a los primeros 10 posts m√°s recientes:

```typescript
// ‚úÖ CORRECTO
const recentPosts = processedPosts.slice(0, 10);
blogPost: recentPosts.map((post) => ({ ... }))

// ‚ùå INCORRECTO - Incluir todos los posts
blogPost: processedPosts.map((post) => ({ ... }))
```

### 2. Sitemap y Robots.txt

- El sitemap se genera autom√°ticamente con `@astrojs/sitemap`
- `robots.txt` est√° en `public/robots.txt`
- **NO modificar manualmente** - se generan en build time

### 3. Open Graph Images

**SIEMPRE** incluir dimensiones:

```astro
<meta property="og:image" content={ogImage} />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:image:alt" content={title} />
```

---

## ‚úÖ CHECKLIST PARA NUEVAS P√ÅGINAS

Al crear una nueva p√°gina, aseg√∫rate de:

- [ ] Crear funci√≥n `generate[Nombre]Meta()` en `blogUtils.ts`
- [ ] Crear funci√≥n `generate[Nombre]StructuredData()` en `blogUtils.ts`
- [ ] Pasar todas las props a `MainLayout`
- [ ] Incluir breadcrumbs si no es la home
- [ ] Generar datos estructurados de breadcrumbs
- [ ] Combinar datos estructurados con `@graph` si hay breadcrumbs
- [ ] Agregar breadcrumbs visuales en el template
- [ ] Incluir dimensiones en todas las im√°genes
- [ ] Verificar canonical URLs sean consistentes
- [ ] No usar scripts inline para metadatos
- [ ] No usar microdata, solo JSON-LD

---

## üìö TIPOS DE SCHEMA ORGANIZADOS POR CONTEXTO

- **Person**: P√°gina principal, autor
- **Blog**: Listado de posts del blog
- **BlogPosting**: Posts individuales
- **ContactPage**: P√°gina de contacto
- **BreadcrumbList**: Navegaci√≥n (siempre con breadcrumbs)
- **Service**: Servicios ofrecidos (en Person)

---

## üé® CONSISTENCIA VISUAL

**SIEMPRE** mantener consistencia en:

- Estilo de breadcrumbs (centrado, mismo dise√±o)
- Metadatos visuales de posts (fecha, autor, categor√≠a)
- CTAs y enlaces (mismo estilo de hover)
- Espaciado y padding (mismo sistema)

---

## üîç VALIDACI√ìN

Antes de finalizar, verificar:

1. Todas las p√°ginas tienen metadatos din√°micos
2. No hay scripts inline para metadatos
3. No hay microdata mezclado con JSON-LD
4. Todas las im√°genes tienen width y height
5. Breadcrumbs est√°n en todas las p√°ginas (excepto home)
6. Datos estructurados est√°n validados (usar Schema.org validator)

---

## üìù EJEMPLOS COMPLETOS

Ver implementaciones de referencia en:

- `src/pages/index.astro` - P√°gina principal
- `src/pages/blog.astro` - Listado de blog
- `src/pages/contacto.astro` - P√°gina de contacto
- `src/pages/posts/[slug].astro` - Posts individuales
- `src/utils/blogUtils.ts` - Funciones de generaci√≥n SEO

---

## üöÄ PRIORIDADES

1. **CR√çTICO**: Metadatos din√°micos, datos estructurados, canonical URLs
2. **IMPORTANTE**: Breadcrumbs, dimensiones de im√°genes
3. **MEJORAS**: Optimizaciones de datos estructurados, validaciones adicionales
