---
import { ClientRouter } from 'astro:transitions';
import '../styles/global.css';
import {
  SITE_TITLE,
  SITE_DESCRIPTION,
  SITE_URL,
  DEFAULT_KEYWORDS,
  DEFAULT_OG_IMAGE,
  AUTHOR_NAME,
  AUTHOR_TWITTER,
} from '../utils/constants';

// Props dinámicos para SEO
export interface Props {
  title?: string;
  description?: string;
  keywords?: string;
  canonical?: string;
  ogImage?: string;
  ogType?: string;
  structuredData?: any;
}

// Extraer props con valores por defecto
const {
  title = SITE_TITLE,
  description = SITE_DESCRIPTION,
  keywords = DEFAULT_KEYWORDS,
  canonical = SITE_URL,
  ogImage = DEFAULT_OG_IMAGE,
  ogType = "website",
  structuredData = null
} = Astro.props;

// Datos de navegación centralizados
const navLinks = [
  { href: "/", label: "Inicio" },
  { href: "/blog", label: "Blog" },
  { href: "/contacto", label: "Contacto" }
];

// Datos estructurados por defecto para SEO
const defaultStructuredData = {
  "@context": "https://schema.org",
  "@type": "Person",
  "name": AUTHOR_NAME,
  "jobTitle": "Especialista en Inteligencia Artificial Aplicada a Ventas",
  "description": "Líder en ventas B2B y tecnología aplicada a resultados. Más de una década transformando la gestión comercial con inteligencia artificial.",
  "url": SITE_URL,
  "sameAs": [
    "https://linkedin.com/in/paulvillalobos",
    "https://twitter.com/paulvillalobos"
  ]
};
---


<!doctype html>
<html lang="es">
	<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <meta name="keywords" content={keywords} />
    <meta name="author" content={AUTHOR_NAME} />
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href={canonical} />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content={ogType} />
    <meta property="og:url" content={canonical} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImage} />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content={title} />
    <meta property="og:site_name" content={AUTHOR_NAME} />
    <meta property="og:locale" content="es_ES" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content={canonical} />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImage} />
    <meta name="twitter:creator" content={AUTHOR_TWITTER} />
    
    <!-- Additional SEO Meta Tags -->
    <meta name="theme-color" content="#2563eb" />
    <meta name="msapplication-TileColor" content="#2563eb" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    
    <!-- Fonts with display=swap for better performance -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    
    <!-- Structured Data -->
    {structuredData && (
      <script type="application/ld+json" set:html={JSON.stringify(structuredData)}></script>
    )}
    
    <!-- Default Structured Data (Person) if no custom data provided -->
    {!structuredData && (
      <script type="application/ld+json" set:html={JSON.stringify(defaultStructuredData)}></script>
    )}

		<ClientRouter />

  </head>
	<body class="bg-white text-slate-900 font-sans antialiased">

		<!-- Header/Navigation -->
		<header class="sticky top-0 z-40 bg-white border-b border-gray-200 h-18">
			<nav class="max-w-7xl mx-auto px-4 sm:px-5 h-full flex items-center justify-between">
				<div class="flex items-center">
					<a href="/" class="text-lg sm:text-xl font-bold text-slate-900 hover:text-blue-600 transition-colors duration-200">
						Paul Villalobos
					</a>
				</div>

				<div class="hidden md:flex items-center space-x-8">
					{navLinks.map(link => (
						<a 
							href={link.href} 
							class="text-slate-600 hover:text-slate-900 transition-colors duration-200 font-medium"
						>
							{link.label}
						</a>
					))}
				</div>

				<div class="hidden md:flex items-center">
					<a 
						href="#contacto" 
						class="bg-blue-600 text-white px-6 py-3 rounded-full font-medium hover:bg-blue-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
					>
						Hablemos
					</a>
				</div>

				<input type="checkbox" id="mobile-menu-toggle" class="hidden">
				<label 
					for="mobile-menu-toggle"
					class="md:hidden p-2 text-slate-600 hover:text-slate-900 transition-colors duration-200 cursor-pointer"
				>
					<svg class="menu-icon w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
					</svg>
					<svg class="close-icon w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
					</svg>
				</label>
			</nav>

			<div 
				id="mobile-menu"
				class="mobile-menu md:hidden fixed inset-0 z-50 bg-white transition-transform duration-300 ease-in-out"
			>
				<div class="flex flex-col h-full">
					<div class="flex items-center justify-between p-4 border-b border-gray-200 h-18">
						<span class="text-lg font-bold text-slate-900">Menú de navegación</span>
						<label 
							for="mobile-menu-toggle"
							class="p-2 text-slate-600 hover:text-slate-900 transition-colors duration-200 cursor-pointer"
						>
							<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
							</svg>
						</label>
					</div>

					<div class="flex-1 px-4 py-6 space-y-6">
						<nav class="space-y-4">
							{navLinks.map(link => (
								<a 
									href={link.href} 
									class="block text-lg font-medium text-slate-900 hover:text-blue-600 transition-colors duration-200 py-2"
								>
									{link.label}
								</a>
							))}
						</nav>

						<div class="pt-6 border-t border-gray-200">
							<a 
								href="#contacto" 
								class="block w-full bg-blue-600 text-white text-center px-6 py-4 rounded-full font-medium hover:bg-blue-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
							>
								Hablemos
							</a>
						</div>
					</div>
				</div>
			</div>
		</header>

		<main id="main" class="min-h-screen">
			<slot />
		</main>

		<footer class="bg-slate-900 text-gray-200">
			<div class="max-w-7xl mx-auto px-4 sm:px-5 py-12 sm:py-16">
				<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
					<section class="space-y-4 sm:col-span-2 lg:col-span-1">
						<h3 class="text-lg font-semibold text-white">{AUTHOR_NAME}</h3>
						<p class="text-gray-300 text-sm leading-relaxed">
							Líder en ventas B2B y tecnología aplicada. Transformando la gestión comercial con inteligencia artificial.
						</p>
					</section>

					<section class="space-y-4">
						<h3 class="text-lg font-semibold text-white">Servicios</h3>
						<nav>
							<ul class="space-y-2">
								<li><a href="#consultoria-ia" class="text-gray-300 hover:text-white transition-colors duration-200">Consultoría IA</a></li>
								<li><a href="#automatizacion" class="text-gray-300 hover:text-white transition-colors duration-200">Automatización</a></li>
								<li><a href="#capacitacion" class="text-gray-300 hover:text-white transition-colors duration-200">Capacitación</a></li>
							</ul>
						</nav>
					</section>

					<section class="space-y-4 sm:col-span-2 lg:col-span-1">
						<h3 class="text-lg font-semibold text-white">Newsletter</h3>
						<p class="text-gray-300 text-sm">
							Recibe insights sobre IA aplicada a ventas.
						</p>
						<form class="space-y-3">
							<input 
								type="email" 
								placeholder="Tu email" 
								class="w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"
								required
							/>
							<button 
								type="submit" 
								class="w-full bg-blue-600 text-white px-4 py-3 rounded-md hover:bg-blue-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-slate-900 font-medium"
							>
								Suscribirse
							</button>
						</form>
					</section>
				</div>

				<div class="mt-8 pt-8 border-t border-slate-700">
					<p class="text-xs text-slate-400 text-center">
						AI Sales Engine — Inteligencia Artificial Aplicada a Ventas.
					</p>
				</div>

			</div>
		</footer>


	</body>
</html>