---
import MainLayout from "../layouts/MainLayout.astro";
import Breadcrumb from "../components/Breadcrumb.astro";
import Button from "../components/Button.astro";
import { SITE_URL, AUTHOR_EMAIL, AUTHOR_LINKEDIN, AUTHOR_NAME } from "../utils/constants";
// Generar metadatos SEO para la página de contacto
const contactMeta = {
  title: "Contacto | Paul Villalobos - Inteligencia Artificial Aplicada a Ventas",
  description: "Contáctame para consultoría en inteligencia artificial aplicada a ventas B2B, automatización comercial y estrategias con IA para maximizar resultados comerciales.",
  keywords: "contacto Paul Villalobos, consultoría IA ventas, consulta gratuita IA ventas, automatización comercial, Paul Villalobos contacto",
  canonical: `${SITE_URL}/contacto`,
  ogImage: "https://paulvillalobos.com/images/og-default.jpg", // Placeholder
  ogType: "website",
};

const contactStructuredData = {
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "ContactPage",
      name: "Contacto | Paul Villalobos",
      url: `${SITE_URL}/contacto`,
      mainEntity: {
        "@type": "Person",
        name: AUTHOR_NAME,
        jobTitle: "Especialista en Inteligencia Artificial Aplicada a Ventas",
        email: AUTHOR_EMAIL,
        url: SITE_URL,
        sameAs: [AUTHOR_LINKEDIN], // Removed TWITTER as it was not imported
      },
    },
    {
      "@type": "BreadcrumbList",
      itemListElement: [
        {
          "@type": "ListItem",
          position: 1,
          name: "Inicio",
          item: SITE_URL,
        },
        {
          "@type": "ListItem",
          position: 2,
          name: "Contacto",
          item: `${SITE_URL}/contacto`,
        },
      ],
    },
  ],
};

// Generar breadcrumbs para contacto
const contactBreadcrumbs = [
  { name: "Inicio", url: SITE_URL },
  { name: "Contacto", url: `${SITE_URL}/contacto` }
];

// Placeholder para WhatsApp - reemplazar con número real
const WHATSAPP_LINK = "https://wa.me/XXXXXXXXXX";
// Placeholder para Calendly - reemplazar con link real
const CALENDLY_LINK = "#";
---

<MainLayout
  title={contactMeta.title}
  description={contactMeta.description}
  keywords={contactMeta.keywords}
  canonical={contactMeta.canonical}
  ogImage={contactMeta.ogImage}
  ogType={contactMeta.ogType}
  structuredData={contactStructuredData}
>
  <main class="min-h-screen bg-white">
    <!-- Hero Section -->
    <section class="bg-white py-20 lg:py-32">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Breadcrumbs -->
        <Breadcrumb items={contactBreadcrumbs} align="center" />

        <div class="text-center max-w-3xl mx-auto mt-12">
          <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-slate-900 leading-tight mb-6 tracking-tight">
            Hablemos sobre cómo optimizar tu sistema comercial con IA
          </h1>
          <p class="text-xl md:text-2xl text-slate-600 leading-relaxed font-light">
            Consultoría práctica, clara y orientada a negocio. Sin hype, sin automatizaciones innecesarias.
          </p>
        </div>
      </div>
    </section>

    <!-- ¿Quién debería contactarme? -->
    <section class="py-16 lg:py-24 bg-slate-50">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="bg-white rounded-lg p-8 lg:p-12 border border-slate-200">
          <h2 class="text-2xl md:text-3xl font-bold text-slate-900 mb-8">
            ¿Quién debería contactarme?
          </h2>
          
          <ul class="space-y-6 mb-10">
            <li class="flex items-start">
              <div class="flex-shrink-0 w-6 h-6 rounded-full bg-[var(--pv-primary-base)] flex items-center justify-center mt-1">
                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
              </div>
              <p class="ml-4 text-lg text-slate-700 leading-relaxed">
                Empresas B2B que quieren mejorar su proceso comercial usando IA
              </p>
            </li>
            
            <li class="flex items-start">
              <div class="flex-shrink-0 w-6 h-6 rounded-full bg-[var(--pv-primary-base)] flex items-center justify-center mt-1">
                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
              </div>
              <p class="ml-4 text-lg text-slate-700 leading-relaxed">
                Equipos que buscan claridad, estructura y velocidad comercial
              </p>
            </li>
            
            <li class="flex items-start">
              <div class="flex-shrink-0 w-6 h-6 rounded-full bg-[var(--pv-primary-base)] flex items-center justify-center mt-1">
                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
              </div>
              <p class="ml-4 text-lg text-slate-700 leading-relaxed">
                Negocios que necesitan automatización práctica, CRM inteligente o entrenamiento en IA aplicada
              </p>
            </li>
          </ul>

          <div class="pt-8 border-t border-slate-200">
            <p class="text-slate-600 italic leading-relaxed">
              Si buscas un chatbot genérico o un desarrollo técnico profundo, probablemente no soy la opción ideal.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Botones principales -->
    <section class="py-16 lg:py-24 bg-white">
      <div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <Button 
            href={CALENDLY_LINK}
            variant="primary"
            size="lg"
            class="w-full sm:w-auto min-w-[240px]"
          >
            Agenda una llamada exploratoria
          </Button>
          
          <Button 
            href={WHATSAPP_LINK}
            variant="ghost"
            size="lg"
            class="w-full sm:w-auto min-w-[240px]"
          >
            Escríbeme por WhatsApp
          </Button>
        </div>
      </div>
    </section>

    <!-- Formulario Tally -->
    <section class="py-16 lg:py-24 bg-slate-50">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="bg-white rounded-lg p-8 lg:p-12 border border-slate-200">
          <h2 class="text-2xl md:text-3xl font-bold text-slate-900 mb-6 text-center">
            Cuéntame sobre tu proyecto
          </h2>
          
          <!-- Placeholder para iframe de Tally -->
          <div class="mt-8">
            <div class="tally-container">
              <iframe
                id="tally-iframe"
                src=""
                loading="lazy"
                width="100%"
                height="100%"
                frameborder="0"
                title="Formulario de contacto"
                class="tally-iframe"
              ></iframe>
              <!-- Placeholder visual mientras se carga Tally -->
              <div class="tally-placeholder">
                <p class="text-slate-400 text-sm">El formulario se cargará aquí</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ¿Qué ocurre después de contactarme? -->
    <section class="py-16 lg:py-24 bg-white">
      <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-2xl md:text-3xl font-bold text-slate-900 mb-12 text-center">
          ¿Qué ocurre después de contactarme?
        </h2>
        
        <div class="grid md:grid-cols-2 gap-8 lg:gap-12">
          <div class="space-y-6">
            <div>
              <div class="flex items-start mb-3">
                <span class="text-3xl font-bold text-[var(--pv-primary-base)] mr-4">1</span>
                <h3 class="text-xl font-semibold text-slate-900">Leo tu caso</h3>
              </div>
              <p class="text-slate-600 ml-12 leading-relaxed">
                Reviso detenidamente la información que compartes para entender tu contexto y necesidades específicas.
              </p>
            </div>
            
            <div>
              <div class="flex items-start mb-3">
                <span class="text-3xl font-bold text-[var(--pv-primary-base)] mr-4">2</span>
                <h3 class="text-xl font-semibold text-slate-900">Te respondo en menos de 24 horas</h3>
              </div>
              <p class="text-slate-600 ml-12 leading-relaxed">
                Recibes una respuesta personalizada con mis primeras impresiones y recomendaciones iniciales.
              </p>
            </div>
          </div>
          
          <div class="space-y-6">
            <div>
              <div class="flex items-start mb-3">
                <span class="text-3xl font-bold text-[var(--pv-primary-base)] mr-4">3</span>
                <h3 class="text-xl font-semibold text-slate-900">Si aplica, coordinamos una llamada de 20 minutos</h3>
              </div>
              <p class="text-slate-600 ml-12 leading-relaxed">
                Una conversación breve y enfocada para profundizar en tu situación y alinear expectativas.
              </p>
            </div>
            
            <div>
              <div class="flex items-start mb-3">
                <span class="text-3xl font-bold text-[var(--pv-primary-base)] mr-4">4</span>
                <h3 class="text-xl font-semibold text-slate-900">Te entrego claridad inmediata sobre tu diagnóstico inicial</h3>
              </div>
              <p class="text-slate-600 ml-12 leading-relaxed">
                Obtienes insights concretos y un roadmap claro sobre cómo la IA puede transformar tu proceso comercial.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Social Proof -->
    <section class="py-16 lg:py-24 bg-slate-50">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Logos placeholder -->
        <div class="flex flex-wrap items-center justify-center gap-8 lg:gap-12 mb-12 opacity-40">
          <div class="text-slate-400 font-semibold text-sm uppercase tracking-wider">Cliente 1</div>
          <div class="text-slate-400 font-semibold text-sm uppercase tracking-wider">Cliente 2</div>
          <div class="text-slate-400 font-semibold text-sm uppercase tracking-wider">Cliente 3</div>
        </div>
        
        <!-- Testimonial -->
        <div class="max-w-2xl mx-auto text-center">
          <blockquote class="text-xl md:text-2xl text-slate-700 font-light leading-relaxed italic mb-4">
            "En 3 semanas teníamos más claridad comercial que en años."
          </blockquote>
          <p class="text-slate-500 text-sm">
            — Cliente B2B
          </p>
        </div>
      </div>
    </section>
  </main>
</MainLayout>

<style>
  /* Estilos para el iframe de Tally responsivo */
  .tally-container {
    position: relative;
    width: 100%;
    min-height: 600px;
    border-radius: 0.5rem;
    overflow: hidden;
    background: #f9fafb;
    border: 1px solid #e5e7eb;
  }
  
  .tally-iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
    min-height: 600px;
    z-index: 1;
  }
  
  /* Placeholder visual cuando el iframe está vacío */
  .tally-placeholder {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 0;
    text-align: center;
  }
  
  /* Ocultar placeholder cuando el iframe tenga contenido */
  .tally-iframe[src]:not([src=""]) ~ .tally-placeholder {
    display: none;
  }
  
  @media (max-width: 768px) {
    .tally-container {
      min-height: 800px;
    }
    
    .tally-iframe {
      min-height: 800px;
    }
  }
  
  /* Cuando Tally esté cargado, ajustar altura automáticamente */
  @media (min-width: 769px) {
    .tally-container {
      height: auto;
      min-height: 600px;
    }
  }
</style>
